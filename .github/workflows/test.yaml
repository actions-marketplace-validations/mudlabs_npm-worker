name: Test Worker

on:
  push:
    paths: 
      - test/npm.?worker.config.ya?ml
   
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Get branch name
        uses: nelonoel/branch-name@v1
      - name: Worker
        uses: mudlabs/npm-worker@${{ process.env.branch }}
        env:
          branch: ${BRANCH_NAME} 
        with:
          config: ./test/
